{"version":3,"sources":["webpack:///webpack/bootstrap 1d329f54b561fd2c032d","webpack:///external \"fs\"","webpack:///./library/config.js","webpack:///./library/helpers.js","webpack:///./index.js","webpack:///external \"http\"","webpack:///external \"https\"","webpack:///external \"url\"","webpack:///external \"string_decoder\"","webpack:///./library/handlers.js","webpack:///./library/data.js","webpack:///external \"crypto\""],"names":["environments","staging","production","currentEnvironment","process","env","NODE_ENV","toLowerCase","environmentToExport","helpers","hash","str","length","crypto","createHmac","config","hashingSecret","update","digest","parseJsonToObject","obj","JSON","parse","e","StringDecoder","string_decoder","httpServer","http","createServer","req","res","unifiedServer","listen","httpPort","console","log","httpsServerOptions","fs","readFileSync","httpsServer","https","httpsPort","parsedUrl","url","path","pathname","trimmedPath","replace","method","queryStringObject","query","headers","decoder","buffer","on","data","write","end","chosenHandler","router","handlers","notFound","statusCode","payload","payloadString","stringify","setHeader","writeHead","ping","users","callback","acceptableMethods","indexOf","_users","post","firstName","trim","lastName","phoneNumber","password","tosAgreement","_data","read","err","hashedPassword","userObject","create","get","put","userData","delete","lib","baseDir","dir","file","open","fileDescriptor","stringData","writeFile","close","message","readFile","parsedData","truncate","unlink"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 1d329f54b561fd2c032d","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 0\n// module chunks = 0","/**\n * Create and export configuration variables\n */\n\n// Container for all the environments\nconst environments = {};\n\n// Staging (default) environment\nenvironments.staging = {\n  'httpPort': 3000,\n  'httpsPort': 3001,\n  'envName' : 'staging',\n  'hashingSecret': 'thisIsASecret'\n}\n\n// Production environment\nenvironments.production = {\n  'httpPort': 5000,\n  'httpsPort': 5001,\n  'envName': 'production',\n  'hashingSecret': 'thisIsASecret'\n};\n\n// Determine which environment was passed as a command-line argument\nconst currentEnvironment = typeof(process.env.NODE_ENV) == 'string' ? process.env.NODE_ENV.toLowerCase() : ''\n\n// Check that the current environment is one of the environments above, if not, default to staging\nconst environmentToExport = typeof(environments[currentEnvironment]) == 'object' ? environments[currentEnvironment] : environments.staging;\n\n// Export the module\nexport default environmentToExport;\n\n\n// WEBPACK FOOTER //\n// ./library/config.js","/**\n * \n * Helpers for various tasks\n */\n\n //Dependencies\n import crypto from 'crypto';\n import config from './config';\n\n // Containers for the helpers\n const helpers = {};\n\n\n // Create a SHA256 hash\n helpers.hash = (str) => {\n   if (typeof(str) === 'string' && str.length > 0) {\n     const hash = crypto.createHmac('sha256', config.hashingSecret).update(str).digest('hex');\n     return hash;\n   } else {\n     return false;\n   }\n };\n\n // Parse a JSON string to an object in all cases without throwing\n helpers.parseJsonToObject = (str) => {\n   try {\n     const obj = JSON.parse(str);\n     return obj;\n   } catch (e) {\n     return {};\n   }\n }\n\nexport default helpers;\n\n\n// WEBPACK FOOTER //\n// ./library/helpers.js","/*\n * Primary file for the API\n * \n * \n*/\n// Dependencies\nimport http from 'http';\nimport https from 'https';\nimport url from 'url';\nimport fs from 'fs';\n\nimport string_decoder from 'string_decoder';\nimport environmentToExport from '././library/config';\nimport handlers from '././library/handlers';\n\nconst StringDecoder = string_decoder.StringDecoder;\nconst config = environmentToExport;\n\n // Instantiate the HTTP server\nconst httpServer = http.createServer(function(req,res){\n  unifiedServer(req,res);\n});\n// Start the HTTP server\nhttpServer.listen(config.httpPort,function(){\n  console.log(`The HTTP server is running on port ${config.httpPort}`);\n});\n\n\n\n// Instantiate the HTTPS server\nconst httpsServerOptions = {\n  'key': fs.readFileSync('./https/key.pem'),\n  'cert': fs.readFileSync('./https/cert.pem')\n};\nconst httpsServer = https.createServer(httpsServerOptions,function(req,res){\n  unifiedServer(req,res);\n});\n// Start the HTTPS server\nhttpsServer.listen(config.httpsPort,function(){\n  console.log(`The HTTPS server is running on port ${config.httpsPort}`);\n });\n\n\n // All the server logic for both the http and https server\n const unifiedServer = (req,res) => {\n   // Get the URL and parse it\n  const parsedUrl = url.parse(req.url, true);\n\n  // Get the path\n  const path = parsedUrl.pathname;\n  const trimmedPath = path.replace(/^\\/+|\\/+$/g, '');\n\n  // Get the HTTP Method\n  const method = req.method.toLowerCase();\n\n  //Get the query string as an object\n  const queryStringObject = parsedUrl.query;\n\n  // Get the headers as an object\n  const headers = req.headers;\n\n  //Get the payload, if any\n  var decoder = new StringDecoder('utf-8');\n  var buffer = '';\n  req.on('data', (data) => {\n    buffer += decoder.write(data);\n  });\n  req.on('end', () => {\n    buffer += decoder.end();\n\n    // Check the router for a matching path for a handler. If one is not found, use the notFound handler instead.\n    var chosenHandler = typeof(router[trimmedPath]) !== 'undefined' ? router[trimmedPath] : handlers.notFound;\n\n    // Construct the data object to send to the handler\n    const data = {\n      trimmedPath,\n      queryStringObject,\n      method,\n      headers,\n      'payload' : buffer\n    };\n    // Route the request to the handler specified in the router\n    chosenHandler(data, (statusCode,payload) => {\n      // Use the status code returned from the handler, or set the default status code to 200\n      statusCode = typeof(statusCode) === 'number' ? statusCode : 200;\n\n      // Use the payload returned from the handler, or set the default payload to an empty object\n      payload = typeof(payload) === 'object' ? payload : {};\n\n      // Convert the payload to a string\n      const payloadString = JSON.stringify(payload);\n\n      // Return the response\n      res.setHeader('Content-Type', 'application/json');\n      res.writeHead(statusCode);\n      res.end(payloadString);\n\n      // Log the request path\n      console.log(\"Returning this response: \",statusCode,payloadString);\n    });\n  });\n }\n\n\n// Define the request router\nconst router = {\n'ping' : handlers.ping,\n'users' : handlers.users\n};\n\n\n// WEBPACK FOOTER //\n// ./index.js","module.exports = require(\"http\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"http\"\n// module id = 4\n// module chunks = 0","module.exports = require(\"https\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"https\"\n// module id = 5\n// module chunks = 0","module.exports = require(\"url\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"url\"\n// module id = 6\n// module chunks = 0","module.exports = require(\"string_decoder\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"string_decoder\"\n// module id = 7\n// module chunks = 0","/**\n * \n * Request handlers\n */\n\n // Dependencies\n import _data from './data';\n import helpers from './helpers';\n\n// Define the handlers\nconst handlers = {};\n\n// Ping handler\nhandlers.ping = (data, callback) => {\n  callback(200);\n};\n\n// Not found handler\nhandlers.notFound = (data, callback) => {\ncallback(404);\n};\n\n// Users\nhandlers.users = (data, callback) => {\n  var acceptableMethods = ['post', 'get', 'put', 'delete'];\n  if (acceptableMethods.indexOf(data.method) > -1) {\n    handlers._users[data.method](data,callback);\n  } else {\n    callback(405);\n  }\n};\n\n// Container for the users submethods\nhandlers._users = {};\n\n\n// Users - post\n// Required data: firstName, lastName, phone, password, tosAgreement\n//Optional data: none\nhandlers._users.post = (data, callback) => {\n  // Check that all required fields are field out\n  const payload = JSON.parse(data.payload);\n  const firstName = typeof(payload.firstName) == 'string' && payload.firstName.trim().length > 0 ? payload.firstName.trim() : false;\n  const lastName = typeof(payload.lastName) === 'string' && payload.lastName.trim().length > 0 ? payload.lastName.trim() : false;\n  const phoneNumber = typeof(payload.phoneNumber) === 'string' && payload.phoneNumber.trim().length === 10 ? payload.phoneNumber.trim() : false;\n  const password = typeof(payload.password) === 'string' && payload.password.trim().length > 0 ? payload.password.trim() : false;\n  const tosAgreement = typeof(payload.tosAgreement) === 'boolean' && payload.tosAgreement === true ? true : false;\n  if (firstName && lastName && phoneNumber && password && tosAgreement, tosAgreement) {\n    _data.read('users', phoneNumber, (err, data) => {\n      if (err) {\n        // Hash the password\n        const hashedPassword = helpers.hash(password);\n\n        // Create the user object\n        if (hashedPassword) {\n          const userObject = {\n            firstName,\n            lastName,\n            phoneNumber,\n            hashedPassword,\n            'tosAgreement' : true\n          }\n  \n          // Store the user\n          _data.create('users',phoneNumber,userObject, (err) => {\n            if(!err) {\n              callback(200);\n            } else {\n              console.log(err);\n              callback(500, {'Error': 'Could not create the new user'});\n            }\n          });\n        } else {\n          callback(500,{'Error' : `Could not hash the user\\'s password.`});\n        }\n      } else {\n        // User already exists\n        callback(400,{'Error' : 'A user with that phone number already exists'});\n      }\n    });\n  } else {\n    callback(400, {'Error': 'Missing required fields'});\n  }\n};\n\n// Users - get\n// Required data: phone\n// Optional data: none\n// Only let authenticated users access their object. Don't let them access anyonbe elses\nhandlers._users.get = (data, callback) => {\n  // Check that the phone number is valid\n  let phoneNumber = data.queryStringObject.phoneNumber.trim();\n  phoneNumber = typeof(data.queryStringObject.phoneNumber) === 'string' && phoneNumber.length === 10 ? phoneNumber : false\n\n  if (phoneNumber) {\n     //Lookup the user\n    _data.read('users', phoneNumber, (err, data) => {\n      if (!err && data){\n        // Remove hashed password from the user before returing it to the requester\n        delete data.hashedPassword;\n        callback(200, data);\n      } else {\n        callback(404);\n      }\n    });\n  } else {\n    callback(400, {'Error': 'Missing required field'});\n  }\n};\n\n// Users - put\n// Required field : phoneNumber\n// Optional data: firstName, lastName, password (at least one should be specified)\n// Only let an authenticated user update their own object. Don't let them upate another users data\nhandlers._users.put = (data, callback) => {\n  // check for the required field\n  const payload = JSON.parse(data.payload);\n\n  let phoneNumber = payload.phoneNumber.trim();\n  phoneNumber = typeof(payload.phoneNumber) === 'string' && phoneNumber.length === 10 ? phoneNumber : false\n\n  // Check for the optional fields\n  const firstName = typeof(payload.firstName) == 'string' && payload.firstName.trim().length > 0 ? payload.firstName.trim() : false;\n  const lastName = typeof(payload.lastName) === 'string' && payload.lastName.trim().length > 0 ? payload.lastName.trim() : false;\n  const password = typeof(payload.password) === 'string' && payload.password.trim().length > 0 ? payload.password.trim() : false;\n\n  // Error if the phonenNumber is invalid\n  if (phoneNumber) {\n    // Error is nothing is sent to update\n    if (firstName || lastName || password) {\n      // Lookup the user\n      _data.read('users', phoneNumber, (err, userData) => {\n        if (!err && userData) {\n          // update the fields necessary\n          if (firstName) {\n            userData.firstName = firstName;\n          }\n          if (lastName) {\n            userData.lastName = lastName;\n          }\n          if (password) {\n            userData.hashedPassword = helpers.hash(password);\n          }\n          // Store the new updates\n          _data.update('users', phoneNumber, userData, (err) => {\n            if (!err) {\n              callback(200);\n            } else {\n              console.log(err);\n              callback(500, {'Error': 'Could not update the user'});\n            }\n          });\n        } else {\n          callback(400, {'Error': 'The specified user does not exist'});\n        }\n      });\n    } else {\n      callback(400, {'Error': 'Missing fields to update'});\n    }\n  } else {\n    callback(400, {'Error': 'Missing required field'});\n  }\n};\n\n// Users - delete\n// Required field: phoneNumber\n// Only let authenticated user delete their object.\n// Cleanup (data) any other data files associated with this user\nhandlers._users.delete = (data, callback) => {\n  // Check that the phone number is valid\n  let phoneNumber = data.queryStringObject.phoneNumber.trim();\n  phoneNumber = typeof(data.queryStringObject.phoneNumber) === 'string' && phoneNumber.length === 10 ? phoneNumber : false\n\n  if (phoneNumber) {\n    //Lookup the user\n    _data.read('users', phoneNumber, (err, data) => {\n      if (!err && data){\n        _data.delete('users', phoneNumber, (err) => {\n          if (!err) {\n            callback(200);\n          } else {\n            callback(500, {'Error': 'Could not delete the specified user'});\n          }\n        });\n      } else {\n        callback(400, {'Error': 'Could not find the specified user'});\n      }\n    });\n  } else {\n    callback(400, {'Error': 'Missing required field'});\n  }\n};\n\nexport default handlers;\n\n\n// WEBPACK FOOTER //\n// ./library/handlers.js","/**\n * Library for storing and editing data\n * \n */\n\n// Dependencies\nimport fs from 'fs';\nimport helpers from './helpers';\n\n// Container for the module (to be exported)\nconst lib = {};\n\n// Base directory of the data folder\nlib.baseDir = './data/';\n\n//Write data to a file\nlib.create = (dir, file, data, callback) => {\n  // Open the file for writing  \n  fs.open(lib.baseDir+dir+'/'+file+'.json', 'w', (err, fileDescriptor ) => {\n    if(!err && fileDescriptor){\n      // Convert data to string\n      const stringData = JSON.stringify(data);\n      // Write to file and close it\n      fs.writeFile(fileDescriptor, stringData, (err) => {\n        if(!err){\n          fs.close(fileDescriptor, (err) => {\n            if(!err) {\n              callback(false);\n            } else {\n              callback('Error closing new file');\n            }\n          });\n        } else {\n          callback('Error writing to new file');\n        }\n      });\n    } else {\n      callback(err.message, 'Could not create new file, it may already exist');\n    }\n  });\n};\n\n// Read data from a file\nlib.read = (dir, file, callback) => {\n  fs.readFile(lib.baseDir+dir+'/'+file+'.json','utf8', (err, data) => {\n    if (!err && data) {\n      const parsedData = helpers.parseJsonToObject(data);\n      return callback(false, parsedData);\n    } else {\n      callback(err, data);\n    }\n  });\n}\n\n// Update data from the file\nlib.update = (dir, file, data, callback) => {\n  // Open the file for writing\n  fs.open(lib.baseDir+dir+'/'+file+'.json','r+', (err, fileDescriptor) => {\n    if(!err && fileDescriptor) {\n      // Convert data to string\n      const stringData = JSON.stringify(data);\n\n      // Truncate the file\n      fs.truncate(fileDescriptor, (err) => {\n        if(!err) {\n          // Write to file and close it\n          fs.writeFile(fileDescriptor, stringData, (err) => {\n            if(!err) {\n              fs.close(fileDescriptor, (err) => {\n                if(!err) {\n                  callback(false);\n                } else {\n                  callback('Error writing to existing file');\n                }\n              });\n            } else {\n              callback('Error writing to existing file');\n            }\n          });\n        } else {\n          callback('Error truncating file');\n        }\n      });\n    } else {\n      callback('Could not open the file for updating, it may not exist yet')\n    }\n  });\n}\n\n\n// Delete a file\nlib.delete = (dir, file, callback) => {\n  // Unlink the file\n  fs.unlink(lib.baseDir+dir+'/'+file+'.json', (err) => {\n    if(!err) {\n      callback(false);\n    } else {\n      callback('Error deleting file');\n    }\n  });\n}\n\nexport default lib;\n\n\n// WEBPACK FOOTER //\n// ./library/data.js","module.exports = require(\"crypto\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"crypto\"\n// module id = 10\n// module chunks = 0"],"sourceRoot":""}